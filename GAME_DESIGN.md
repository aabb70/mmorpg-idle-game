# 遊戲系統設計文檔

## 核心遊戲循環

1. **技能訓練** → 獲得經驗值和材料
2. **收集材料** → 用於製作或直接販售
3. **製作物品** → 將材料加工成有價值的商品
4. **市場交易** → 與其他玩家交換所需物品
5. **升級技能** → 解鎖新的製作配方和更高效的訓練

## 技能系統詳細設計

### 採集技能 (Gathering Skills)
- **採礦 (Mining)**: 獲得礦石、寶石等
- **伐木 (Logging)**: 獲得木材、特殊樹材等
- **釣魚 (Fishing)**: 獲得魚類、珍珠等
- **採集 (Foraging)**: 獲得草藥、漿果等

### 製作技能 (Crafting Skills)
- **鍛造 (Smithing)**: 製作武器、工具、首飾
- **裁縫 (Tailoring)**: 製作服裝、布料物品
- **廚師 (Cooking)**: 製作食物、藥劑
- **煉金 (Alchemy)**: 製作魔法藥劑、附魔材料
- **工藝 (Crafting)**: 製作家具、裝飾品等

### 技能升級機制
```
等級 1: 0-100 經驗
等級 2: 0-120 經驗 (100 * 1.2)
等級 3: 0-144 經驗 (120 * 1.2)
...
下一等級所需經驗 = 當前等級最大經驗 * 1.2
```

## 物品系統設計

### 物品類型
1. **材料 (Material)**: 用於製作的基礎材料
2. **工具 (Tool)**: 提高效率的裝備
3. **裝備 (Equipment)**: 提供加成的物品
4. **消耗品 (Consumable)**: 一次性使用的物品
5. **雜項 (Misc)**: 其他類型物品

### 稀有度系統
- **普通 (Common)**: 灰色，基礎物品
- **罕見 (Uncommon)**: 綠色，稍有價值
- **稀有 (Rare)**: 藍色，較有價值
- **史詩 (Epic)**: 紫色，高價值
- **傳說 (Legendary)**: 橙色，極高價值

### 物品屬性
```typescript
interface Item {
  id: string
  name: string
  description: string
  itemType: ItemType
  rarity: Rarity
  baseValue: number
  // 可能的額外屬性
  durability?: number
  efficiency?: number
  requirements?: {
    skillType: SkillType
    level: number
  }
}
```

## 製作系統設計

### 配方結構
```typescript
interface Recipe {
  id: string
  resultItem: Item
  requiredSkill: SkillType
  requiredLevel: number
  ingredients: Array<{
    item: Item
    quantity: number
  }>
  craftingTime: number // 秒
  experienceGained: number
}
```

### 製作過程
1. 選擇配方
2. 檢查技能等級需求
3. 檢查材料需求
4. 開始製作 (消耗時間)
5. 完成製作，獲得物品和經驗

## 市場交易系統

### 交易機制
1. **上架物品**: 玩家選擇物品、數量、單價
2. **瀏覽市場**: 其他玩家可以看到所有上架物品
3. **購買物品**: 支付金幣購買物品
4. **收益分配**: 賣家獲得金幣，買家獲得物品

### 定價建議系統
- 根據歷史交易價格提供建議定價
- 顯示當前市場同類物品的價格範圍
- 供需關係影響建議價格

### 交易限制
- 每個玩家最多可同時上架 20 個商品
- 上架時間限制 (例如 7 天自動下架)
- 交易手續費 (例如 5% 的金幣)

## 經濟平衡設計

### 金幣來源
1. **NPC 商店**: 販售基礎物品獲得少量金幣
2. **完成任務**: 獲得金幣獎勵
3. **市場交易**: 販售物品給其他玩家

### 金幣消耗
1. **購買材料**: 從 NPC 或玩家購買
2. **工具維修**: 工具有耐久度，需要維修
3. **市場手續費**: 交易時的手續費
4. **技能訓練費**: 某些高級技能需要金幣

### 物品價值體系
```
材料價值 < 加工品價值 < 稀有品價值
採集容易程度 ∝ 物品基礎價值
製作複雜度 ∝ 成品附加價值
稀有度 ∝ 價值倍數
```

## 多人互動設計

### 即時同步內容
- 市場物品上架/下架
- 玩家在線狀態
- 技能等級排行榜
- 全域聊天訊息

### 非同步內容
- 個人技能進度
- 背包物品
- 製作進度

### 社交功能 (未來實作)
- 好友系統
- 公會系統
- 合作製作
- 玩家商店

## 進度保存設計

### 自動保存觸發
- 技能經驗變化
- 物品數量變化
- 市場交易完成
- 定期自動保存 (每分鐘)

### 保存內容
- 玩家基本資訊 (等級、金幣、經驗)
- 所有技能等級和經驗
- 背包所有物品
- 市場上架物品
- 正在進行的活動 (製作、訓練等)

## 擴展性考量

### 未來功能
1. **任務系統**: NPC 任務、日常任務
2. **成就系統**: 各種成就和獎勵
3. **裝備強化**: 裝備升級和附魔
4. **寵物系統**: 協助採集和製作的寵物
5. **領地系統**: 玩家可以擁有自己的工作坊

### 平衡性調整
- 定期分析遊戲數據
- 根據玩家反饋調整經驗值、價格等
- 新增內容時保持原有平衡

## 技術實作重點

### 前端狀態管理
- Redux store 分模組管理
- 樂觀更新 + 錯誤回滾機制
- 本地快取減少 API 呼叫

### 後端架構
- RESTful API + WebSocket 混合
- 資料庫交易確保一致性
- 適當的快取策略

### 安全性考量
- 所有遊戲邏輯在後端驗證
- 防止作弊和刷金
- 資料加密和用戶認證